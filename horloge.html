<!DOCTYPE html>

<!--
    Nom                     |    id ssh     |       matricule   |
----------------------------------------------------------------|
Matthieu Beauchamp-Boulay   |   beaumatt    |       20234205    |



Lien Miro:  https://miro.com/app/board/uXjVO9MT7jA=/

-->

<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Horloge</title>

    <!-- Define our functions here -->
    <script>
        window.onload = init;


        function init() {
            initPrimitives();
        }


        function initPrimitives() {
            finishSun();

        }


        function finishSun() {
            let sun = document.getElementById("p_sun");
            const r = Number(sun.firstElementChild.getAttribute("r"));

            const spikeCount = 32;
            const increment = 2 * Math.PI / spikeCount;

            for (let i = 0; i < spikeCount; i++) {
                let triangle = document.createElementNS("http://www.w3.org/2000/svg", "polygon");

                let theta1 = i * increment;
                let thetaMid = (i + 1.5) * increment; // adding above 1 makes it spiral
                let theta2 = (i + 1) * increment;

                let growth = 2;
                if (i % 2 !== 0) { growth = 1.75 }

                let points = [
                    [50 + (r * 0.99) * Math.cos(theta1), 50 + (r * 0.99) * Math.sin(theta1)],
                    [50 + (r * growth) * Math.cos(thetaMid), 50 + (r * growth) * Math.sin(thetaMid)],
                    [50 + (r * 0.99) * Math.cos(theta2), 50 + (r * 0.99) * Math.sin(theta2)]
                ];

                let attr = "";
                for (let point of points) {
                    attr += point[0] + "," + point[1];

                    if (point !== points[2]) { attr += " " }
                }

                triangle.setAttribute("points", attr);
                sun.appendChild(triangle);

            }
        }


    </script>


</head>


<body>

<svg id="p_draw" width="0" height="0" viewbox="0 0 100 100">

    <!-- Our primitives here! I encourage the use of the p_ prefix on primitives' ids

    Use a translate to center them around (0, 0) to make scaling/centering easier
     This means that all of or primitives **will be placed by their CENTER position** -->

    <defs>
        <!-- We use this svg space to draw our primitives.
             It also allows predictable behavior of gradients when using userSpaceOnUse (see below) -->

        <!-- userSpaceOnUse allows for the gradient to spread on groups
         (instead of applying to each element) Since it applies to global viewBox space -->
        <!--Inconsistent behavior between Firefox and chrome when not specifying cx, cy...-->
        <radialGradient id="sunGrad" cx="50" cy="50" gradientUnits="userSpaceOnUse">
            <stop offset="0%" stop-color="yellow"/>
            <stop offset="100%" stop-color="orange"/>  <!-- Black for testing/example -->
        </radialGradient>

        <g id="p_sun" transform="translate(-50 -50)" fill="url('#sunGrad')">
            <circle r="25" cx="50" cy="50"/>
            <!-- JavaScript completes this -->
        </g>

    </defs>


</svg>


<svg id="horloge" width="600" height="800" viewBox="0 0 200 200">


    <defs>

        <!-- example of use -->
        <!-- Need to create a scaled instance before setting a position ... (If I need to scale that is)-->
        <use xlink:href="#p_sun" transform="scale(2)" id="big_sun"/>

    </defs>

    <!-- Canvas Box -->
    <rect x="1" y="0" width="198" height="200" fill="none" stroke="black" stroke-width="1"/>


    <!-- Finally, I can position correctly with it's center -->
    <use href="#big_sun" x="100" y="100"/>


</svg>

</body>

</html>
